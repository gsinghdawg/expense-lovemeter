// This file is automatically generated. Do not edit it directly.
import { createClient } from '@supabase/supabase-js';
import type { Database } from './types';

const SUPABASE_URL = "https://dpxtymdbkiexqktpkbkl.supabase.co";
const SUPABASE_PUBLISHABLE_KEY = "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImRweHR5bWRia2lleHFrdHBrYmtsIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDE4MTM5MDMsImV4cCI6MjA1NzM4OTkwM30.Ww4A3W0UoXatIz5_MvuR3xN49a40tLXeMFvsHMhFEi8";

// Import the supabase client like this:
// import { supabase } from "@/integrations/supabase/client";

export const supabase = createClient<Database>(SUPABASE_URL, SUPABASE_PUBLISHABLE_KEY);

// Define Stripe payment links for direct no-code integration
export const STRIPE_PAYMENT_LINKS = {
  monthly: "https://buy.stripe.com/5kA2ce7Iy8Fs7tedQQ",
  quarterly: "https://buy.stripe.com/test_8wMbKTeXYccs7r2cMT",
  biannual: "https://buy.stripe.com/test_14k7ADebcgwEfLi7su",
  annual: "https://buy.stripe.com/test_28o15j37g3I09za3ce"
};

// Stripe Buy Button IDs for embedded buttons
export const STRIPE_BUY_BUTTON_IDS = {
  monthly: "buy_btn_1R4TuCECEgtMuXU2dS1WlFV8",
  quarterly: "buy_btn_1R4TuCECEgtMuXU2dS1WlFV8", // Replace with actual ID when available
  biannual: "buy_btn_1R4TuCECEgtMuXU2dS1WlFV8", // Replace with actual ID when available
  annual: "buy_btn_1R4TuCECEgtMuXU2dS1WlFV8" // Replace with actual ID when available
};

// Add a helper for saving click counts during page unload events
export const saveClickCountBeforeUnload = async (userId: string, count: number) => {
  try {
    await supabase
      .from('user_click_counts')
      .upsert(
        { user_id: userId, click_count: count, updated_at: new Date().toISOString() },
        { onConflict: 'user_id' }
      );
    return true;
  } catch (error) {
    console.error('Error saving click count on unload:', error);
    return false;
  }
};

// Keep this for compatibility with existing code
export const STRIPE_PUBLISHABLE_KEY = "pk_live_51QzSAJECEgtMuXU2GLO1bMiyihcl0AZ4o318dV4Nbwga6d8K8M2YutpgcgV0EGHP882QgIX9MqXyaUtoXvhlZMAd00r7TMTC4R";
